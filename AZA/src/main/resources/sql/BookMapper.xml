<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		
<mapper namespace = "BookMapper">
	<resultMap id = "bookSelectMap" type="lesson">
		<result property ="isbn" column="isbn" jdbcType="VARCHAR"/>
		<result property ="bookTitle" column="book_title" jdbcType="VARCHAR"/>
		<result property ="publisher" column="publisher" jdbcType="VARCHAR"/>
		<result property ="bookPrice" column="book_price" jdbcType="VARCHAR"/>
		<result property ="author" column="author" jdbcType="VARCHAR"/>
		<result property ="bookYear" column="book_year" jdbcType="VARCHAR"/>
		<result property ="bookImg" column="book_Img" jdbcType="VARCHAR"/>
		<result property ="lessonCode" column="lesson_code" jdbcType="VARCHAR"/>
		
		<!-- <result property ="bookCode" column="book_code" jdbcType="NUMERIC"/>
		<result property ="lessonCode" column="lesson_code" jdbcType="VARCHAR"/>
		<result property ="isbn" column="isbn" jdbcType="VARCHAR"/> -->
		<!-- <association property="lessonBookSelectMap"  javaType="lessonBook">
			<id property="BookCode" column="book_code" jdbcType="NUMERIC"/>
			<result property="lessonCode" column="lesson_code" jdbcType="VARCHAR"/>
			<result property="isbn" column="isbn" jdbcType="VARCHAR"/>
		</association> -->
	</resultMap>
	
	<resultMap id = "lessonBookSelectMap" type = "lesson">
		
	</resultMap>
	
	<insert id = "addLessonBook">
		INSERT
		INTO BOOK
		VALUES (#{isbn}, #{bookTitle},
		#{publisher:VARCHAR},#{bookPrice:VARCHAR},#{author:VARCHAR},
		#{bookYear:VARCHAR},#{bookImg:VARCHAR})
	</insert>
	
	<select id = "listLessonBook" resultMap ="bookSelectMap">
		SELECT*
		FROM ( SELECT inner_table.*, ROWNUM AS row_seq
			FROM ( SELECT * FROM lesson_book
					WHERE lesson_code = #{lessonCode}
					ORDER BY book_code) inner_table
			WHERE ROWNUM &lt;= #{endRowNum})
		WHERE row_seq BETWEEN #{startRowNum} AND #{endRowNum}
	</select>
	
<!-- <delete id="deleteLessonBook">
		DELETE
		FROM lesson_book
		WHERE isbn = #{isbn}
	</delete> -->
</mapper>